# funstackStatic()

The `funstackStatic()` function is the main Vite plugin that enables React Server Components for building SPAs without a runtime server.

## Import

```typescript
import funstackStatic from "@funstack/static";
```

## Usage

```typescript
// vite.config.ts
import funstackStatic from "@funstack/static";
import { defineConfig } from "vite";

export default defineConfig({
  plugins: [
    funstackStatic({
      root: "./src/root.tsx",
      app: "./src/App.tsx",
    }),
  ],
});
```

## Options

### root (required)

**Type:** `string`

Path to the root component file. This component wraps your entire application and defines the HTML document structure (`<html>`, `<head>`, `<body>`).

```typescript
funstackStatic({
  root: "./src/root.tsx",
  // ...
});
```

The root component receives `children` as a prop:

```tsx
// src/root.tsx
export default function Root({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <head>
        <meta charSet="UTF-8" />
        <title>My Site</title>
      </head>
      <body>{children}</body>
    </html>
  );
}
```

### app (required)

**Type:** `string`

Path to the app component file. This component defines your application's content.

```typescript
funstackStatic({
  root: "./src/root.tsx",
  app: "./src/App.tsx",
});
```

```tsx
// src/App.tsx

export default function App() {
  return (
    <div>
      <h1>Welcome to My Site</h1>
      {/* Your fantastic application goes here */}
    </div>
  );
}
```

**Note:** if your app has multiple pages, you can use a routing library here just like in a traditional SPA.

### publicOutDir (optional)

**Type:** `string`
**Default:** `"dist/public"`

Output directory for the generated static files.

```typescript
funstackStatic({
  root: "./src/root.tsx",
  app: "./src/App.tsx",
  publicOutDir: "build/static",
});
```

### ssr (optional)

**Type:** `boolean`
**Default:** `false`

Enable server-side rendering of the App component.

When `false` (default), only the Root shell is rendered to HTML at build time. The App component's RSC payload is fetched separately and rendered client-side using `createRoot`. This results in faster initial HTML delivery but requires JavaScript to display the App content.

When `true`, both the Root and App components are fully rendered to HTML. The client hydrates the existing HTML using `hydrateRoot`, which can improve perceived performance and SEO since the full content is visible before JavaScript loads.

```typescript
funstackStatic({
  root: "./src/root.tsx",
  app: "./src/App.tsx",
  ssr: true, // Enable full SSR
});
```

**Note:** In both modes, React Server Components are used - the `ssr` option only controls whether the App's HTML is pre-rendered or rendered client-side.

## Full Example

```typescript
// vite.config.ts
import { funstackStatic } from "@funstack/static";
import { defineConfig } from "vite";

export default defineConfig({
  plugins: [
    funstackStatic({
      root: "./src/root.tsx",
      app: "./src/App.tsx",
      publicOutDir: "dist/public",
    }),
  ],
});
```

## Vite Commands

You can use the same Vite commands you would use in a normal Vite project:

- `vite dev` - Starts the development server
- `vite build` - Builds the static files
- `vite preview` - Previews the built static files locally

## See Also

- [Getting Started](/funstack-static/getting-started) - Quick start guide
- [defer()](/funstack-static/api/defer) - Deferred rendering for streaming
- [React Server Components](/funstack-static/learn/rsc) - Understanding RSC
